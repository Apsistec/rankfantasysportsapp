<fieldset>

    <form #paymentForm="ngForm" (ngSubmit)="pmt.handleForm()" class="checkout">
        <div class="form-row">
        <label for="card-info">Pay with Credit or Debit Card</label>

        <div id="card-element" #cardElement></div>
        <div id="card-errors" class="help is-danger" role="alert" *ngIf="formError">{{ formError }}</div>
        </div>

        <div *ngIf="totalAmount; then pay else save;">
            <!-- ng-template appears here -->
        </div>
    </form>

</fieldset>
 
<!-- Template when Charging Card -->

<ng-template #pay>
    
    <button type="submit" 
            class="button is-info" 
            [disabled]="!formComplete || loading"
            [class.is-loading]="loading">

        Pay {{ totalAmount / 100 }}.00    

    </button>
 

</ng-template>



<!-- Template when Saving Card for Later Use -->

<ng-template #save>
    <button type="submit" 
        class="button is-info" 
        [disabled]="!formComplete || loading"
        [class.is-loading]="loading">

        Save Card

    </button>

    <div *ngIf="source?.id" class="notification is-success">
        Attached payment source {{ result.id }} -- {{ card.brand }} ending in {{ card.last4 }}
    </div>  
    
    <!-- If error, show the user the raw error msg from Stripe -->

</ng-template>

