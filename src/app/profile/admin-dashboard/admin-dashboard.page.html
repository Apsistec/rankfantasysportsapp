<app-header [titleId]="titleId"></app-header>
<ion-content color="dark">
  <ion-grid>
    <ion-row>
      <ion-grid>
        <ion-row>
          <ion-col class="ion-no-padding" size-lg="8" size-xl="8">
            <ion-card color="light">
              <ion-card-header>
                <ion-card-title>
                  <ion-label color="secondary">
                    Trouble Tickets
                  </ion-label>
                </ion-card-title>
              </ion-card-header>
              <ion-list>
                <ion-item
                  button
                  *ngFor="let ticket of tickets | async"
                  class="ion-text-wrap"
                  (click)="openTicket(ticket.id)"
                >
                  <ion-icon
                    name="radio-button-off"
                    color="light"
                    *ngIf="ticket.status == 0"
                    slot="start"
                  ></ion-icon>
                  <ion-icon
                    name="done-all"
                    color="primary"
                    *ngIf="ticket.status == 1"
                    slot="start"
                  ></ion-icon>
                  <ion-label>
                    <ion-text>
                      <h2>{{ ticket.title }}</h2>
                    </ion-text>
                    <ion-text color="light">
                      <p class="ion-text-wrap">{{ ticket.desc }}</p>
                    </ion-text>
                  </ion-label>
                  <ion-label slot="start">
                    <ion-note>
                      {{ ticket.id }}
                    </ion-note>
                    <br />
                    <ion-note>
                      {{ ticket.created_at?.seconds*1000 | date: 'MMM d H:HH' }}
                    </ion-note>
                  </ion-label>
                </ion-item>
              </ion-list>
            </ion-card>
          </ion-col>
          <ion-col class="ion-no-padding" size="3">
            <ion-card color="light">
              <ion-card-header>
                <ion-card-title>
                  <ion-label color="secondary">
                    Admins
                  </ion-label>
                </ion-card-title>
              </ion-card-header>
              <ion-list>
                <ion-item *ngFor="let admin of admins | async">
                  <ion-avatar>
                    <img
                      [src]="admin.photoURL || '../assets/img/dummy-user.png'"
                    />
                  </ion-avatar>
                  &nbsp; &nbsp;
                  <ion-label>
                    <ion-text>
                      {{ admin.displayName }}
                    </ion-text>
                    <br />
                    <ion-note>
                      {{ admin.email }}
                    </ion-note>
                  </ion-label>
                </ion-item>
              </ion-list>
            </ion-card>

            <ion-card color="light">
              <ion-card-header>
                <ion-card-title>
                  <ion-label color="secondary">
                    All Users
                  </ion-label>
                </ion-card-title>
                <ion-card-subtitle>
                  <ion-label>
                    Unpaid, Current & Cancelled
                  </ion-label>
                </ion-card-subtitle>
                <ion-toolbar>
                  <ion-searchbar
                    inputmode="search"
                    type="search"
                    autocomplete="'on'"
                    animated="true"
                    style="border-radius: 5em;"
                  >
                  </ion-searchbar>
                  <br />
                  <ion-text>
                    <sup class="ion-text-center ion-text-wrap"
                      >Search by any field</sup
                    >
                  </ion-text>
                </ion-toolbar>
              </ion-card-header>
              <ion-list>
                <ion-item class="userlist" *ngFor="let user of users | async">
                  <ion-avatar>
                    <img
                      [src]="user.photoURL || '../assets/img/dummy-user.png'"
                    />
                  </ion-avatar>
                  &nbsp; &nbsp;
                  <ion-label>
                    <ion-text>
                      {{ user.displayName }}
                    </ion-text>
                    <br />
                    <ion-note>
                      {{ user.email }}
                    </ion-note>
                    <br />
                    <ion-note [hidden]="!user.gold" color="gold">
                      Gold
                    </ion-note>
                    <ion-note [hidden]="!user.silver" color="silver">
                      Silver
                    </ion-note>
                    <ion-note [hidden]="!user.bronze" color="bronze">
                      Bronze
                    </ion-note>
                  </ion-label>
                  <ion-button
                    color="primary"
                    size="small"
                    (click)="sendEmail(user.email)"
                  >
                    <ion-icon name="email" icon-only></ion-icon>
                  </ion-button>
                </ion-item>
              </ion-list>
            </ion-card>
            <!-- </ion-card> -->
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-row>
  </ion-grid>
</ion-content>
<ion-footer translucent>
  <ion-toolbar color="light"> </ion-toolbar>
</ion-footer>
